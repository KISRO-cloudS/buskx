{% extends 'main/face.html' %}

{% block content %}
<style type="text/css">
/* Container style */
.custom-form-container {
    max-width: 100%;
    margin: 20px auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
   
    box-sizing: border-box;
    color: #333;
}

/* Form label style */
.custom-label {
    font-weight: bold;
    color: #444;
    display: block;
    margin-bottom: 6px;
}

/* Input, textarea, and select styles */
.custom-input[type="text"],
.custom-input[type="email"],
.custom-input[type="file"],
textarea,
select {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: #fff;
    transition: border-color 0.3s ease;
}

.custom-input:focus,
textarea:focus,
select:focus {
    outline: none;
    border-color: #007bff;
}

/* Emoji button style */
.custom-emoji-button {
    padding: 8px;
    font-size: 24px;
    background-color: #e9ecef;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-right: 5px;
    margin-bottom: 5px;
}

.custom-emoji-button:hover {
    background-color: #ced4da;
}

/* Submit button style */
.custom-submit-button {
    width: 100%;
    padding: 12px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.custom-submit-button:hover {
    background-color: #0056b3;
}

/* Back button style */
.custom-back-button {
    display: inline-block;
    padding: 10px 15px;
    margin-top: 20px;
    border-radius: 8px;
    text-align: center;
    font-size: 14px;
    background-color: #f9f9f9;
    color: #000;
    border: 1px solid #ccc;
    text-decoration: none;
    transition: background-color 0.3s ease;
}

.custom-back-button:hover {
    background-color: #e2e6ea;
}

/* Responsive styles */
@media (max-width: 600px) {
    .custom-form-container {
        padding: 15px;
    }

    .custom-submit-button,
    .custom-back-button {
        padding: 10px;
        font-size: 16px;
    }

    .custom-emoji-button {
        font-size: 20px;
        padding: 6px;
    }
}


/* Container for the activities */
.campaign-activities-container {
    max-width: 100%;
    margin: 10px auto;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #f9f9f9;
}

/* Header styling */
.campaign-activities-header {
    margin-bottom: 10px;
    color: #333;
    font-size: 18px;
}

/* Wrapper for the activities list */
.campaign-activities-list {
    max-height: 120px;
    overflow: hidden;
    transition: max-height 0.5s ease, padding 0.5s ease;
    padding: 0 5px;
}

/* Expanded list styling */
.campaign-activities-expanded {
    max-height: none;
    padding: 0 5px;
}

/* Styling for the custom activity-text element */
activity-text.campaign-activity-item {
    display: block; /* Ensures it behaves like a paragraph */
    margin-bottom: 8px;
    font-size: 14px;
    color: #555;
}

/* Toggle button for activities */
.campaign-toggle-button {
    display: inline-block;
    padding: 8px 12px;
    margin-top: 10px;
    cursor: pointer;
    color: #007bff;
    background-color: #e7f0ff;
    border: 1px solid #007bff;
    border-radius: 4px;
    text-align: center;
    transition: background-color 0.3s ease, color 0.3s ease;
    font-size: 14px;
}

/* Hover effect on the toggle button */
.campaign-toggle-button:hover {
    background-color: #007bff;
    color: #fff;
}

/* Focus outline removal for the toggle button */
.campaign-toggle-button:focus {
    outline: none;
}

</style>

<h2 style="font-size:22px; padding-left: 20px; color:#333;">Campaign Activities Form</h2>

<div class="custom-form-container">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ formset.management_form }}
        {% for form in formset %}
            <div>
                {{ form.as_p }}
                <label class="custom-label">Emoji:</label>
                <div>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üì¢', '{{ form.content.auto_id }}')">üì¢</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üéâ', '{{ form.content.auto_id }}')">üéâ</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üíº', '{{ form.content.auto_id }}')">üíº</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üìä', '{{ form.content.auto_id }}')">üìä</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üí°', '{{ form.content.auto_id }}')">üí°</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üîç', '{{ form.content.auto_id }}')">üîç</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üì£', '{{ form.content.auto_id }}')">üì£</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üéØ', '{{ form.content.auto_id }}')">üéØ</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üîî', '{{ form.content.auto_id }}')">üîî</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üì±', '{{ form.content.auto_id }}')">üì±</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üí∏', '{{ form.content.auto_id }}')">üí∏</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üîë', '{{ form.content.auto_id }}')">üîë</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üî¶', '{{ form.content.auto_id }}')">üî¶</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üéÅ', '{{ form.content.auto_id }}')">üéÅ</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üìÜ', '{{ form.content.auto_id }}')">üìÜ</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üíª', '{{ form.content.auto_id }}')">üíª</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üìù', '{{ form.content.auto_id }}')">üìù</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üîß', '{{ form.content.auto_id }}')">üîß</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('üõ†Ô∏è', '{{ form.content.auto_id }}')">üõ†Ô∏è</button>
                </div>
                
                    <div>

       <div class="campaign-activities-container">
    <h4 class="campaign-activities-header">Examples of Activities to Post</h4>
    <div id="campaignActivitiesList" class="campaign-activities-list">
        {% for activity in campaign.get_objective_and_activities.Activities %}
            <activity-text class="campaign-activity-item">{{ activity }}</activity-text>
        {% endfor %}
    </div>
    <span id="toggleActivitiesButton" class="campaign-toggle-button">See More</span>
</div>

    </div>
            </div>
            <hr>
        {% endfor %}
        <button type="submit" class="custom-submit-button">Submit</button>
    </form>
</div>
<script>
        document.getElementById('toggleButton').addEventListener('click', function() {
            var container = document.getElementById('activitiesContainer');
            var button = document.getElementById('toggleButton');

            if (container.classList.contains('activities-content-expanded')) {
                container.classList.remove('activities-content-expanded');
                button.textContent = 'See More';
            } else {
                container.classList.add('activities-content-expanded');
                button.textContent = 'See Less';
            }
        });
    </script>
<script>
    function addEmoji(emoji, fieldId) {
        var contentField = document.getElementById(fieldId);
        contentField.value += emoji;
    }

    function uploadAudio() {
        var input = document.createElement('input');
        input.type = 'file';
        input.accept = 'audio/*, video/*';

        input.onchange = function(e) {
            var file = e.target.files[0];
            var audio = document.getElementById('bgAudio');
            audio.pause();
            localStorage.setItem('bgAudioFile', URL.createObjectURL(file));
            localStorage.setItem('bgAudioPosition', audio.currentTime);
            audio.src = localStorage.getItem('bgAudioFile');
            audio.play();
        };

        input.click();
    }

    window.onload = function() {
        var audio = document.getElementById('bgAudio');
        var bgAudioFile = localStorage.getItem('bgAudioFile');
        var audioPosition = parseFloat(localStorage.getItem('bgAudioPosition'));

        if (bgAudioFile) {
            audio.src = bgAudioFile;
            audio.addEventListener('loadedmetadata', function() {
                if (!isNaN(audioPosition)) {
                    audio.currentTime = audioPosition;
                }
                audio.play();
            });
        }
    }
</script>

<a href="{% url 'view_campaign' campaign_id=campaign.pk %}" class="custom-back-button"> 
    <i class="fa fa-arrow-left"></i> Back 
</a>
{% endblock %}
