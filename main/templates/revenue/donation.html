{% extends 'main/face.html' %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Site Verification Meta Tag -->
  <meta name="google-site-verification" content="2IjHwnbJp2eoJ42Ec2-vy5FHzwfpyA4qxZlA2Ct1lW8" />

  <!-- bing Site Verification Meta Tag -->
  <meta name="msvalidate.01" content="2DF73531AC8292B0D47E7DEAE6EEF4CF" />

  <!-- yandex Site Verification Meta Tag -->
  <meta name="yandex-verification" content="27149014e6b080dd" />

  <!-- Meta Tags for SEO -->
  <meta name="description" content="Join RallyNex to support impactful campaigns across global causes like Environmental Conservation, Education, Health, and Equality. Create, share, and fund projects that drive positive change in your community and beyond. Become part of a passionate community dedicated to making a difference today!">
  <meta name="keywords" content="crowdfunding, global causes, environmental conservation, community development, health and wellness, education, equality and inclusion, animal welfare, humanitarian aid, sustainable development, economic empowerment, policy advocacy, artistic advocacy, support campaigns, social impact">
  <meta name="author" content="RallyNex Team">
  <meta name="language" content="English">
  <link rel="canonical" href="https://rallynex.onrender.com">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="RallyNex - Support Campaigns and Causes">
  <meta property="og:description" content="Join RallyNex to support impactful campaigns across global causes like Environmental Conservation, Health, and Education. Create, share, and fund projects that drive positive change!">
  <meta property="og:url" content="https://rallynex.onrender.com">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://rallynex.s3.eu-north-1.amazonaws.com/main/files/og-image.png">

  <meta property="og:image:alt" content="RallyNex platform image">
  <meta property="og:site_name" content="RallyNex">
  <meta property="og:locale" content="en_US">

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="RallyNex - Support Campaigns and Causes">
  <meta name="twitter:description" content="Join RallyNex to support impactful campaigns across global causes like Environmental Conservation, Health, and Education. Create, share, and fund projects that drive positive change!">
  <meta name="twitter:image" content="https://rallynex.s3.eu-north-1.amazonaws.com/main/files/og-image.png">
  <meta name="twitter:image:alt" content="RallyNex platform image">
  <meta name="twitter:site" content="@RallyNex">



  <!-- Stylesheets -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <title>RallyNex - Together for Change: Support Global Campaigns and Transform Lives</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        /* Donate Page Styles */
        .donate-page {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Donate Header Styles */
        .donate-header {
            text-align: center;
        }

        .donate-title {
            margin-bottom: 20px;
            color: #007bff;
        }

        /* Donations Section Styles */
        .donations-section {
            width: 100%;
            margin-bottom: 40px;
        }

        .donations-title {
            color: #007bff;
        }

        .donations-list {
            list-style: none;
            padding: 10px;
        }

        .donation-item {
            margin-bottom: 20px;
        }

        .recipient-label {
            font-weight: bold;
        }

        .link-label {
            font-weight: bold;
        }

        .donation-link {
            color: #007bff;
            text-decoration: none;
            transition: color 0.3s;
        }

        .donation-link:hover {
            color: #0056b3;
        }

        .note {
            font-size: 14px;
            color: #888;
            margin-top: 5px;
        }

        /* Donation Form Section Styles */
        .donation-form-section {
            width: 100%;
            margin-bottom: 40px;
            padding: 10px;
        }

        .donation-form-title {
            color: #007bff;
        }

        .donation-form {
            margin-top: 20px;
            width: 100%;
        }

        .donation-form input[type="text"],
        .donation-form textarea {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
        }

        .submit-btn {
            display: inline-block;
            background-color: #007bff;
            color: #fff;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-btn:hover {
            background-color: #0056b3;
        }

        .delete-btn {
            display: inline-block;
            background-color: #ff4d4d;
            color: #fff;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-left: 10px;
        }

        .delete-btn:hover {
            background-color: #d70000;
        }

        .square-with-arrow {
            position: relative;
            display: inline-block;
        }

        .square-with-arrow .fa-square {
            position: relative;
            display: inline-block;
        }

        .square-with-arrow .fa-arrow-right {
            position: absolute;
            top: 0;
            right: 0;
            margin-top: -5px;
            margin-right: -10px;
            transform: rotate(-45deg);
        }

        @media (max-width: 600px) {
            .donate-page {
                padding: 10px;
            }

            .submit-btn,
            .delete-btn {
                width: 100%;
                margin: 10px 0;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="donate-page">
        <header class="donate-header">
            <h1 class="donate-title" style="font-size: 19px;">Donate to {{ campaign.title }}</h1>
        </header>

        <section class="donations-section">
            <h2 class="donations-title" style="font-size: 19px;">Donation Links</h2>
            <ul class="donations-list">
                {% for donation in donations %}
                    <li class="donation-item">
                        <strong class="recipient-label">Recipient:</strong> {{ donation.user.username }}

                        {% if donation.user.profile.is_verified %}
                            <span class="verified-status" style="font-size: 12px;">âœ…Verified</span>
                        {% endif %}
                        <br>
                        <strong class="link-label">Donation Link:</strong> <a href="{{ donation.donation_link }}" class="donation-link">{{ donation.donation_link }}
                            <div class="square-with-arrow" style="font-size: 14px;">
                                <i class="fas fa-square"></i>
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </a>
                        <div class="note">Clicking this link does not initiate a charge. It indicates your intent to donate. Thank you!</div>
                        {% if user == donation.user %}
                            <form method="post" style="display: inline;">
                                {% csrf_token %}
                                <input type="hidden" name="delete_donation" value="{{ donation.id }}">
                                <button type="submit" class="delete-btn">Delete</button>
                            </form>
                        {% endif %}
                    </li>
                {% empty %}
                    <li>No donations yet.</li>
                {% endfor %}
            </ul>
        </section>
        
        {% if user == campaign.user.user %}
        <section class="donation-form-section">
            <h2 class="donation-form-title" style="font-size: 19px;">Generate a Donation Link</h2>
            <form method="post" enctype="multipart/form-data" class="donation-form">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="submit-btn">Submit Donation Link</button>
            </form>
        </section>
        {% endif %}
    </div>
    <script type="text/javascript">
           function uploadAudio() {
        var input = document.createElement('input');
        input.type = 'file';
        input.accept = 'audio/*, video/*';

        input.onchange = function(e) {
            var file = e.target.files[0];
            var audio = document.getElementById('bgAudio');
            audio.pause();
            localStorage.setItem('bgAudioFile', URL.createObjectURL(file));
            localStorage.setItem('bgAudioPosition', audio.currentTime);
            audio.src = localStorage.getItem('bgAudioFile');
            audio.play();
        };

        input.click();
    }

    window.onload = function() {
        var audio = document.getElementById('bgAudio');
        var bgAudioFile = localStorage.getItem('bgAudioFile');
        var audioPosition = parseFloat(localStorage.getItem('bgAudioPosition'));

        if (bgAudioFile) {
            audio.src = bgAudioFile;
            audio.addEventListener('loadedmetadata', function() {
                if (!isNaN(audioPosition)) {
                    audio.currentTime = audioPosition;
                }
                audio.play();
            });
        }
    }
    </script>
</body>
</html>
{% endblock %}
